const miModulo=(()=>{const e=document.querySelector("#btnpedir"),t=document.querySelector("#btndetener"),l=document.querySelector("#btnnuevo"),n=document.querySelectorAll("small"),r=document.querySelectorAll(".divCartas");let a,d,i=[],o=[];const c=(e=1)=>{o=u();for(let t=0;t<=e;t++)i.push(0)},u=()=>{let e=[];const t=["C","D","H","S"],l={11:"A",12:"J",13:"K",14:"Q"};for(let n=2;n<=14;n++)for(letra of t)s=n>10?l[n]:n,e.push(s.toString()+letra);return _.shuffle(e)},h=e=>{if(0===e.length)throw"Ya no hay mas cartas";return a=e.length>=1?e.pop():null},g=(e,t)=>{i[e]+=(e=>{let t=e.substring(0,e.length-1);return"A"===t?11:isNaN(t)?10:1*t})(a),t.innerText=i[e]},b=e=>{do{if(a=h(o),g(i.length-1,n[1]),p(i.length-1),e>21)break}while(i[i.length-1]<21&&i[i.length-1]<=e);m(e)},m=e=>{setTimeout(()=>{i[i.length-1]<=21&&(i[i.length-1]>e||e>21)?(alert("Perdiste"),f()):e<=21&&(e>i[i.length-1]||i[i.length-1]>21)?(alert("Ganaste"),f()):i[i.length-1]==e&&e<=21?(alert("Empate"),f()):(alert("Nadie gano"),f())},100)},f=()=>{t.disabled=!1,e.disabled=!1;for(let e in i)i[e]=0;n.forEach(e=>e.innerText=0);for(let e of r)e.innerHTML="";o=u()},p=e=>{(d=document.createElement("img")).src=`assets/cartas/${a}.png`,d.classList.add("carta"),r[e].append(d)};return c(),e.addEventListener("click",()=>{a=h(o),g(0,n[0]),p(0),i[0]>21?(e.disabled=!0,t.disabled=!0,b(i[0])):21===i[0]&&(e.disabled=!0,t.disabled=!0,b(i[0]))}),t.addEventListener("click",()=>{e.disabled=!0,t.disabled=!0,b(i[0])}),l.addEventListener("click",()=>{f()}),{iniciar:c}})();



